var play_au=1;$(window).on("load",function(){$(".preloader").delay(1e3).fadeOut("slow")});var pContainerHeight=$(".bird-box").height();$(window).scroll(function(){var e=$(this).scrollTop();if(e<=pContainerHeight&&($(".logo").css({transform:"translate(0px, "+e/2+"%)"}),$(".back-bird").css({transform:"translate(0px, "+e/4+"%)"}),$(".fore-bird").css({transform:"translate(0px, -"+e/10+"%)"})),e>$(".large-window").offset().top-$(window).height()){$(".large-window").css({"background-position":"center "+(e-$(".large-window").offset().top)+"px"});var t=(e-$(".large-window").offset().top+400)/(e/5);$(".window-tint").css({opacity:t})}e>$(window).height()?$(".menu").slideDown():$(".menu").slideUp()});var song=null,el=null;$(document).ready(function(){var e=document.getElementById("spec");$(".my-content").hide(),$(".palka1,.palka2,.palka3,.palka4").hide(),$(".blur-menu").hide(),$(".bmenu-ober").hide(),$(".bmenu").hide(),$(".menu").hide(),$("#my-footer").hide(),$("footer").hide(),$(".right").hide(),$(".bgi1,.bgi2,.bgi3,.bgi4").hide(),$(".enter-site").hide(),$(".enter-site").click(function(){$("header").removeClass("site-header"),$(".site-header").removeClass("spectrum-cont"),e.parentNode.removeChild(e),$("header").addClass("main-site"),$(".spectrum").hide(),$(".enter-site").hide(),$(".left-text-1, .left-text-2").hide(),$(".palka1,.palka2,.palka3,.palka4").show(),$("#triangle-bottomleft, .bottom-text").hide(),$(".my-content").show(),$(".blur-menu").show(100),$(".bmenu-ober").show(0),$(".bmenu").show(1e3),$("#my-footer").show(),$(".right").show(),$("footer").show(),$(".bgi1,.bgi2,.bgi3,.bgi4").show(),audio.pause(),$(".menu").slideUp()}),$(".full-track-but").click(function(){$(".full-tracks").animate({height:"150px"})}),$(".resid").owlCarousel({items:3,loop:!0,margin:0,autoplay:!0,autoplayTimeout:2e3,autoplayHoverPause:!0}),$(".track-box").owlCarousel({animateOut:"fadeOut",items:1,nav:!0,dots:!1}),$(function(){$('a[data-target^="anchor"]').bind("click.smoothscroll",function(){var e=$(this).attr("href"),t=$(e).offset().top-50;return $("body, html").animate({scrollTop:t},500),!1})}),$("form").submit(function(){var e=$(this);return $.ajax({type:"POST",url:"localhost:3000/mail.php",data:e.serialize()}).done(function(){alert("Thank you!"),setTimeout(function(){e.trigger("reset")},1e3)}),!1})});var ctx=$("#canvas").get()[0].getContext("2d"),audio=null;(audio=document.createElement("audio")).src="audio/titov.mp3",audio.controls=!0,audio.crossOrigin="anonymous";var context=new AudioContext,node=context.createScriptProcessor(512,1,1),analyser=context.createAnalyser();analyser.smoothingTimeConstant=.7;var FFT=analyser.fftSize=32,source=context.createMediaElementSource(audio);function drawSpectrum(e){for(var t=2;t<e.length;t+=3)for(var o=e[t],a=parseInt((o+1)/FFT),n=8;8-a<n;n--)ctx.fillStyle="rgba(255,255,255,1)",roundRect(ctx,(t-2)/3*23+0,18*n,18,13,3,!0,!1)}function roundRect(e,t,o,a,n,i,r,l){void 0===l&&(l=!0),void 0===i&&(i=5),e.beginPath(),e.moveTo(t+i,o),e.lineTo(t+a-i,o),e.quadraticCurveTo(t+a,o,t+a,o+i),e.lineTo(t+a,o+n-i),e.quadraticCurveTo(t+a,o+n,t+a-i,o+n),e.lineTo(t+i,o+n),e.quadraticCurveTo(t,o+n,t,o+n-i),e.lineTo(t,o+i),e.quadraticCurveTo(t,o,t+i,o),e.closePath(),l&&e.stroke(),r&&e.fill()}function initAudio(e){song=e.find(".au")[0]}function playAudio(){return song.play(),1}function stopAudio(){song.pause()}audio.addEventListener("canplay",function(){source.connect(analyser),analyser.connect(node),node.connect(context.destination),source.connect(context.destination)}),window.onload=function(){},audio.addEventListener("ended",function(){audio.play()},!1),node.onaudioprocess=function(){var e=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(e),ctx.clearRect(0,0,1920,255),ctx.fillStyle="rgba(255,255,255,1)",drawSpectrum(e)},$(".triangle-play").click(function(e){e.preventDefault(),1===play_au?(playAudio(),play_au=0):(stopAudio(),play_au=1)}),$(".track-item").click(function(){initAudio($(this)),1===play_au?(playAudio(),play_au=0):(stopAudio(),play_au=1)}),$(".triangle").click(function(){audio.play(),context.resume(),$(".overlay").fadeOut(1e3),$(".triangle").fadeOut(1e3),$(".enter-site").show()});